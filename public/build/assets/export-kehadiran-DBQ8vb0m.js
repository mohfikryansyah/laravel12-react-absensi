import{r as k,j as e,S as F}from"./app-Ffg-GmBL.js";import{B as n}from"./button-Qg5HyjvD.js";import{C as y,a as C}from"./calendar-BcQDfKGq.js";import{C as M}from"./checkbox-mCKCvy25.js";import{C as U,a as E,b as P,c as _,d as T,e as $}from"./command-Bwc0h7KK.js";import{D as V,a as L,b as q,c as B,d as H,g as I,f as K}from"./dialog-mvaV7Q8z.js";import{u as O,F as R,a as i,b as d,c,d as m,e as D}from"./form-C2-EWfmQ.js";import{P as x,a as u,b as h}from"./popover-BhBIammX.js";import{c as w}from"./utils-jAU0Cazi.js";import{c as A}from"./createLucideIcon-p75epl1b.js";import{C as G}from"./chevrons-up-down-bPu2XCfW.js";import{C as z}from"./check-C60HpFQE.js";import{f as o}from"./format-acRrnPkz.js";import"./chevron-right-DXKyazGZ.js";import"./chevron-left-D-YhqwNx.js";import"./index-s-DF2i5E.js";import"./index-D0Hs1dii.js";import"./index-DpWjNuKG.js";import"./index-l-TZJ4k7.js";import"./index-DsEHfaDd.js";import"./label-DhWLsGB-.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Q=A("Download",J);function ge({employees:p}){const[j,v]=k.useState(!1),r=O({defaultValues:{users:[],startDate:void 0,endDate:void 0}}),t=r.watch("users"),g=s=>{const a=r.getValues().users;a.includes(s)?r.setValue("users",a.filter(l=>l!==s)):r.setValue("users",[...a,s])};function b(s){const a=s.startDate?o(new Date(s.startDate),"yyyy-MM-dd"):"",f=s.endDate?o(new Date(s.endDate),"yyyy-MM-dd"):"",l=[...s.users.map(S=>`users[]=${S}`),`startDate=${a}`,`endDate=${f}`].join("&");F.get(route("attendances.export"),s,{preserveScroll:!0}),window.location.href=route("attendances.export")+"?"+l}const N=()=>{if(t.length===0)return"Pilih User";if(t.length===1){const s=p.find(a=>a.user_id===t[0]);return s?s.user.name:"1 User dipilih"}return`${t.length} User dipilih`};return e.jsxs(V,{children:[e.jsx(L,{asChild:!0,children:e.jsxs(n,{className:"h-8 bg-blue-500 hover:bg-blue-600 cursor-pointer",children:[e.jsx(Q,{}),"Export"]})}),e.jsxs(q,{className:"sm:max-w-md",children:[e.jsx(B,{children:e.jsx(H,{children:"Export Rekapan Kehadiran"})}),e.jsx(R,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(b),id:"export-attendances",className:"space-y-4",children:[e.jsx(i,{control:r.control,name:"users",render:()=>e.jsxs(d,{children:[e.jsx(c,{children:"Pilih User"}),e.jsxs(x,{open:j,onOpenChange:v,children:[e.jsx(u,{asChild:!0,children:e.jsxs(n,{variant:"outline",role:"combobox","aria-expanded":j,className:"w-full justify-between",children:[N(),e.jsx(G,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsx(h,{className:"popover-content-width-same-as-its-trigger w-full p-0",children:e.jsxs(U,{children:[e.jsx(E,{placeholder:"Cari user..."}),e.jsxs(P,{children:[e.jsx(_,{children:"User tidak ditemukan."}),e.jsx(T,{children:p.map(s=>e.jsxs($,{onSelect:()=>g(s.user_id),className:"flex items-center gap-2",children:[e.jsx(M,{checked:t.includes(s.user_id),onCheckedChange:()=>g(s.user_id)}),e.jsx("span",{children:s.user.name}),t.includes(s.user_id)&&e.jsx(z,{className:"ml-auto h-4 w-4"})]},s.id))})]})]})})]}),e.jsx(m,{})]})}),e.jsxs("div",{className:"grid-cols-12 space-y-4 md:grid md:space-y-0",children:[e.jsx("div",{className:"col-span-5",children:e.jsx(i,{control:r.control,name:"startDate",render:({field:s})=>e.jsxs(d,{className:"flex flex-col",children:[e.jsx(c,{children:"Tanggal Mulai"}),e.jsxs(x,{children:[e.jsx(u,{asChild:!0,children:e.jsx(D,{children:e.jsxs(n,{variant:"outline",className:w("col-span-5 w-full md:rounded-tr-none md:rounded-br-none pl-3 text-left font-normal",!s.value&&"text-muted-foreground"),children:[s.value?o(s.value,"yyyy/MM/dd"):e.jsx("span",{children:"Pilih tanggal"}),e.jsx(y,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(h,{className:"w-auto p-0",align:"start",children:e.jsx(C,{mode:"single",selected:s.value,onSelect:s.onChange,disabled:a=>a>new Date||a<new Date("2020-01-01"),initialFocus:!0})})]}),e.jsx(m,{})]})})}),e.jsx("div",{className:"col-span-2 hidden w-full items-end md:grid",children:e.jsx("div",{className:"flex items-center justify-center border bg-[#f9fafb] px-5 py-[9px] text-xs text-gray-400 shadow-xs",children:"to"})}),e.jsx("div",{className:"col-span-5",children:e.jsx(i,{control:r.control,name:"endDate",render:({field:s})=>e.jsxs(d,{className:"flex flex-col",children:[e.jsx(c,{children:"Tanggal Akhir"}),e.jsxs(x,{children:[e.jsx(u,{asChild:!0,children:e.jsx(D,{children:e.jsxs(n,{variant:"outline",className:w("w-full md:rounded-tl-none md:rounded-bl-none pl-3 text-left font-normal",!s.value&&"text-muted-foreground"),children:[s.value?o(s.value,"yyyy/MM/dd"):e.jsx("span",{children:"Pilih tanggal"}),e.jsx(y,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),e.jsx(h,{className:"w-auto p-0",align:"start",children:e.jsx(C,{mode:"single",selected:s.value,onSelect:s.onChange,disabled:a=>a>new Date||a<new Date("2020-01-01"),initialFocus:!0})})]}),e.jsx(m,{})]})})})]}),e.jsxs(I,{className:"mt-4 sm:justify-start",children:[e.jsx(K,{asChild:!0,children:e.jsx(n,{type:"button",variant:"secondary",children:"Close"})}),e.jsx(n,{type:"submit",variant:"default",children:"Export"})]})]})})]})]})}export{ge as default};
