import{r as f,j as a,S as K,V as N}from"./app-Bta-wT-b.js";import{B as l}from"./button-yj5hMQ3c.js";import{C as w,a as k}from"./calendar-CC-dsLnt.js";import{C as S,a as L,b as D,c as A,d as P,e as v}from"./command-Bx13nn_r.js";import{D as F,a as _,b as M,c as G,d as z,e as H,f as R}from"./dialog-l8x9es3p.js";import{u as U,F as $,a as i,b as o,c,d,e as T}from"./form-Bv2a12iq.js";import{P as m,a as h,b as u}from"./popover-RLZG7F2w.js";import{c as O}from"./utils-jAU0Cazi.js";import{s as q,C as J}from"./zod-IuNA-TFj.js";import{C as V}from"./chevrons-up-down-DOgTaHrR.js";import{T as Q}from"./triangle-alert-CEa2hD7a.js";import{f as x}from"./format-acRrnPkz.js";import"./index-8OSeXHHY.js";import"./createLucideIcon-CVuAcCb-.js";import"./chevron-right-BPnegaHu.js";import"./chevron-left-8KL3Yjt_.js";import"./index-DKj-CO1Z.js";import"./index-D73HEG_a.js";import"./index-CAD34kM0.js";import"./index-Be9ZpaHw.js";import"./label-BWVyYn6N.js";function fa({cutiperjadis:W,users:t}){const[b,C]=f.useState(!1),[j,g]=f.useState(!1),[E,y]=f.useState(!1),s=U({resolver:q(J),defaultValues:{user_id:void 0,tanggal_awal:void 0,tanggal_akhir:void 0,keterangan:"Perjalanan Dinas"},mode:"onChange"});function B(e){const n={...e,tanggal_awal:x(e.tanggal_awal,"yyyy-MM-dd"),tanggal_akhir:x(e.tanggal_akhir,"yyyy-MM-dd")};K.post(route("cuti-perjalanan-dinas.store"),n,{onSuccess:()=>{s.reset(),N.success("Berhasil menambahkan data"),y(!1)},onError:r=>{console.log(r),N.error("Gagal menambahkan data"),Object.entries(r).forEach(([p,I])=>{s.setError(p,{type:"server",message:String(I)})})}})}return a.jsxs(F,{open:E,onOpenChange:y,children:[a.jsx(_,{asChild:!0,children:a.jsx(l,{className:"h-8",children:"Tambah Data"})}),a.jsxs(M,{children:[a.jsxs(G,{children:[a.jsx(z,{children:"Cuti atau Perjalanan Dinas"}),a.jsx(H,{children:"Tambahkan pegawai yang sedang cuti atau perjalanan dinas"})]}),a.jsx($,{...s,children:a.jsxs("form",{onSubmit:s.handleSubmit(B),className:"space-y-4",id:"cutiperjadis",children:[a.jsx(i,{control:s.control,name:"user_id",render:({field:e})=>{var n;return a.jsxs(o,{children:[a.jsx(c,{children:"Pegawai"}),a.jsxs(m,{open:b,onOpenChange:C,children:[a.jsx(h,{asChild:!0,children:a.jsxs(l,{variant:"outline",role:"combobox",className:"w-full justify-between",children:[e.value?(n=t.find(r=>r.id===e.value))==null?void 0:n.name:"Pilih pegawai",a.jsx(V,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),a.jsx(u,{className:"popover-content-width-same-as-its-trigger w-auto p-0",children:a.jsxs(S,{children:[a.jsx(L,{placeholder:"Contoh: Sri Lutfianti"}),a.jsxs(D,{children:[a.jsx(A,{children:"Tidak ada pegawai yang ditemukan"}),a.jsx(P,{children:t==null?void 0:t.map(r=>a.jsx(v,{value:String(r.id),onSelect:p=>{s.setValue("user_id",Number(p)),C(!b)},children:r.name},r.id))})]})]})})]}),a.jsx(d,{})]})}}),a.jsxs("div",{className:"grid-cols-12 space-y-4 md:grid md:space-y-0",children:[a.jsx("div",{className:"col-span-6",children:a.jsx(i,{control:s.control,name:"tanggal_awal",render:({field:e})=>a.jsxs(o,{className:"flex flex-col",children:[a.jsx(c,{children:"Tanggal Mulai"}),a.jsxs(m,{children:[a.jsx(h,{asChild:!0,children:a.jsx(T,{children:a.jsxs(l,{variant:"outline",className:O("col-span-5 w-full pl-3 text-left font-normal md:rounded-tr-none md:rounded-br-none",!e.value&&"text-muted-foreground"),children:[e.value?x(e.value,"yyyy/MM/dd"):a.jsx("span",{children:"Pilih tanggal"}),a.jsx(w,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),a.jsx(u,{className:"w-auto p-0",align:"start",children:a.jsx(k,{mode:"single",selected:e.value,onSelect:e.onChange,initialFocus:!0})})]}),a.jsx(d,{})]})})}),a.jsx("div",{className:"col-span-6",children:a.jsx(i,{control:s.control,name:"tanggal_akhir",render:({field:e})=>a.jsxs(o,{className:"flex flex-col",children:[a.jsx(c,{children:"Tanggal Akhir"}),a.jsxs(m,{children:[a.jsx(h,{asChild:!0,children:a.jsx(T,{children:a.jsxs(l,{variant:"outline",className:O("w-full pl-3 text-left font-normal md:rounded-tl-none md:rounded-bl-none",!e.value&&"text-muted-foreground"),children:[e.value?x(e.value,"yyyy/MM/dd"):a.jsx("span",{children:"Pilih tanggal"}),a.jsx(w,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),a.jsx(u,{className:"w-auto p-0",align:"start",children:a.jsx(k,{mode:"single",selected:e.value,onSelect:e.onChange,initialFocus:!0})})]}),a.jsx(d,{})]})})})]}),a.jsx(i,{control:s.control,name:"keterangan",render:({field:e})=>a.jsxs(o,{children:[a.jsx(c,{children:"Keterangan"}),a.jsxs(m,{open:j,onOpenChange:g,children:[a.jsx(h,{asChild:!0,children:a.jsxs(l,{variant:"outline",role:"combobox",className:"w-full justify-between",children:[e.value?e.value:"Pilih keterangan",a.jsx(V,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),a.jsx(u,{className:"popover-content-width-same-as-its-trigger w-auto p-0",children:a.jsx(S,{children:a.jsx(D,{children:a.jsxs(P,{children:[a.jsx(v,{value:"Cuti",onSelect:n=>{s.setValue("keterangan",n),g(!j)},children:"Cuti"}),a.jsx(v,{value:"Perjalanan Dinas",onSelect:n=>{s.setValue("keterangan",n),g(!j)},children:"Perjalanan Dinas"})]})})})})]}),a.jsx(d,{})]})}),a.jsxs(F,{children:[a.jsx(_,{asChild:!0,children:a.jsx(l,{variant:"default",size:"sm",className:"m-0 bg-blue-500 hover:bg-blue-600",children:"Submit"})}),a.jsx(M,{className:"sm:max-w-[425px]",children:a.jsxs("div",{className:"flex flex-col items-center justify-center",children:[a.jsx("div",{className:"flex h-14 w-14 items-center justify-center rounded-full bg-orange-200",children:a.jsx(Q,{className:"h-8 w-8 text-orange-500"})}),a.jsx("h1",{className:"mt-4 text-lg font-bold",children:"Peringatan!"}),a.jsx("p",{className:"mt-2 text-gray-700",children:"Periksa kembali data yang telah dimasukkan"}),a.jsx("p",{className:"text-gray-700",children:"Data tidak dapat dihapus atau diubah"}),a.jsxs("div",{className:"mt-4 grid w-full grid-cols-2 gap-x-2",children:[a.jsx(R,{asChild:!0,children:a.jsx(l,{variant:"outline",children:"Batal"})}),a.jsx(l,{form:"cutiperjadis",type:"submit",variant:"default",className:"bg-blue-500 transition-all duration-300 hover:bg-blue-600 active:scale-90",children:"Submit"})]})]})})]})]})})]})]})}export{fa as default};
