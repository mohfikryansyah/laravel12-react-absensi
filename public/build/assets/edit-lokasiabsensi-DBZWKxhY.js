import{r as p,j as e,L,S as E,c as M}from"./app-Ffg-GmBL.js";import{B as y}from"./button-Qg5HyjvD.js";import{C as S,a as v,b as F,d as N}from"./card-CU1sSMWZ.js";import{u as R,F as _,a as o,b as n,c as l,e as i,d as c}from"./form-C2-EWfmQ.js";import{I as d}from"./input-CUfs9bFq.js";import{M as P,u as w,L as A,d as H}from"./map-leaflet-CFRuD9nF.js";import{A as I}from"./app-layout-D2rvRVF-.js";import{s as T,L as V}from"./zod-BqYJMEXX.js";import B from"./tab-edit-view-CJmQeReg.js";import{f as D}from"./format-acRrnPkz.js";import{i as J}from"./id-vBssW-nJ.js";import"./utils-jAU0Cazi.js";import"./label-DhWLsGB-.js";import"./index-DpWjNuKG.js";import"./index-DsEHfaDd.js";import"./createLucideIcon-p75epl1b.js";import"./index-s-DF2i5E.js";import"./index-l-TZJ4k7.js";import"./dropdown-menu-5lBqjCU5.js";import"./check-C60HpFQE.js";import"./use-initials-Ci3hpmZk.js";import"./chevrons-up-down-bPu2XCfW.js";import"./app-logo-icon-BpEplJFT.js";import"./building-2-DEpnN3Mt.js";import"./chevron-right-DXKyazGZ.js";import"./square-pen-D60wkTJr.js";const U=[{title:"Lokasi Presensi",href:route("office.index")},{title:"Edit",href:"#"}];function je({office:t}){const g=t.latitude,b=t.longitude,m=p.useRef(null),u=p.useRef(null),f=()=>(w({click(r){if(s.setValue("latitude",r.latlng.lat),s.setValue("longitude",r.latlng.lng),u.current&&u.current.remove(),m.current){const a=A.marker(r.latlng,{icon:H}).addTo(m.current);u.current=a}}}),null),[k,x]=p.useState(!1),s=R({resolver:T(V),defaultValues:{name:t.name,radius:t.radius,clock_in:t.clock_in,clock_out:t.clock_out,latitude:t.latitude,longitude:t.longitude},mode:"onChange"});function C(r){x(!0),D(new Date,"EEEE, d MMMM yyyy, HH:mm:ss",{locale:J}),E.put(route("office.update",{office:t.id}),r,{preserveScroll:!0,onSuccess:()=>{M.success("Berhasil memperbarui data lokasi."),s.reset(),x(!1)},onError:j=>{x(!1),Object.keys(j).forEach(h=>{s.setError(h,{type:"server",message:j[h]})})}})}return e.jsx(I,{breadcrumbs:U,children:e.jsxs("div",{className:"flex h-full max-w-5xl flex-col gap-4 rounded-xl p-4",children:[e.jsx(L,{title:"Ubah Lokasi"}),e.jsx(B,{office:t}),e.jsxs(S,{children:[e.jsx(v,{children:e.jsx(F,{children:"Ubah Lokasi"})}),e.jsx(N,{children:e.jsx(_,{...s,children:e.jsxs("form",{onSubmit:s.handleSubmit(C),children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[e.jsx(o,{control:s.control,name:"name",render:({field:r})=>e.jsxs(n,{children:[e.jsx(l,{children:"Name"}),e.jsx(i,{children:e.jsx(d,{placeholder:"DPMPTSP",...r})}),e.jsx(c,{})]})}),e.jsx(o,{control:s.control,name:"clock_in",render:({field:r})=>e.jsxs(n,{children:[e.jsx(l,{children:"Jam Masuk"}),e.jsx(i,{children:e.jsx(d,{type:"time",className:"block",placeholder:"07:00:00",...r})}),e.jsx(c,{})]})}),e.jsx(o,{control:s.control,name:"clock_out",render:({field:r})=>e.jsxs(n,{children:[e.jsx(l,{children:"Jam Keluar"}),e.jsx(i,{children:e.jsx(d,{type:"time",className:"block",placeholder:"16:00:00",...r})}),e.jsx(c,{})]})}),e.jsx(o,{control:s.control,name:"radius",render:({field:r})=>e.jsxs(n,{children:[e.jsxs(l,{children:["Radius ",e.jsx("span",{className:"text-gray-400",children:"(meter)"})]}),e.jsx(i,{children:e.jsx(d,{type:"number",placeholder:"1000",...r,onChange:a=>r.onChange(Number(a.target.value)|0)})}),e.jsx(c,{})]})}),e.jsx(o,{control:s.control,name:"latitude",render:({field:r})=>e.jsxs(n,{children:[e.jsx(l,{children:"Latitude"}),e.jsx(i,{children:e.jsx(d,{placeholder:"1000",...r,onChange:a=>r.onChange(a.target.value)})}),e.jsx(c,{})]})}),e.jsx(o,{control:s.control,name:"longitude",render:({field:r})=>e.jsxs(n,{children:[e.jsx(l,{children:"Longitude"}),e.jsx(i,{children:e.jsx(d,{placeholder:"1000",...r,onChange:a=>r.onChange(a.target.value)})}),e.jsx(c,{})]})})]}),e.jsx(y,{type:"submit",disabled:k,className:"mt-4",children:"Simpan"})]})})})]}),e.jsx(P,{center:[g,b],mapRef:m,children:e.jsx(f,{})})]})})}export{je as default};
